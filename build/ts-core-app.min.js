var TSCore;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(){}return b.prototype.header=function(a,b){return this._headers=this._headers||{},this._headers[a]=b,this},b.prototype.removeHeader=function(a){return delete this._headers[a],this},b.prototype.getHeaders=function(){return this._headers},b.prototype.method=function(a){return this._method=a,this},b.prototype.getMethod=function(){return this._method},b.prototype.url=function(a,b){return this._url=this._interpolateUrl(a,b),this},b.prototype._interpolateUrl=function(a,b){var c=this;return void 0===b&&(b={}),b=b||{},a=a.replace(/(\(\s*|\s*\)|\s*\|\s*)/g,""),a=a.replace(/:([a-z]\w*)/gi,function(a,d){return c._popFirstKey(b,d)||""}),a=a.replace(/(^|[^:])[\/]{2,}/g,"$1/"),a=a.replace(/\/+$/i,"")},b.prototype._popFirstKey=function(a,b){return a.hasOwnProperty(b)?this._popKey(a,b):void 0},b.prototype._popKey=function(a,b){var c=a[b];return delete a[b],c},b.prototype.getUrl=function(){return this._url},b.prototype.data=function(a){return this._data=a,this},b.prototype.getData=function(){return this._data},b.prototype.option=function(a,b){return this._options=this._options||{},this._options[a]=b,this},b.prototype.getOptions=function(){return this._options},b.prototype.getRequestConfig=function(){return _.extend({headers:this.getHeaders(),method:this.getMethod(),url:this.getUrl(),data:this.getData()},this.getOptions())},b.factory=function(){return new b},b.get=function(c,d){var e=new b;return e.method(a.App.Constants.HttpMethods.GET),e.url(c,d),e},b.post=function(c,d,e){var f=new b;return f.method(a.App.Constants.HttpMethods.POST),f.url(c,d),f.data(e),f},b.put=function(c,d,e){var f=new b;return f.method(a.App.Constants.HttpMethods.PUT),f.url(c,d),f.data(e),f},b["delete"]=function(c,d){var e=new b;return e.method(a.App.Constants.HttpMethods.DELETE),e.url(c,d),e},b}();b.RequestOptions=c}(c=b.Http||(b.Http={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c=a.App.Http.RequestOptions,d=function(){function a(a){this.httpService=a}return a.prototype.prefix=function(a){return this._prefix=a,this},a.prototype.getPrefix=function(){return this._prefix},a.prototype.singleKey=function(a){return this._singleKey=a,this},a.prototype.getSingleKey=function(){return this._singleKey},a.prototype.multipleKey=function(a){return this._multipleKey=a,this},a.prototype.getMultipleKey=function(){return this._multipleKey},a.prototype.transformer=function(a){return this._transformer=a,this},a.prototype.getTransformer=function(){return this._transformer},a.prototype.request=function(a){var b=a.getUrl();return a.url(this.getPrefix()+b),this.httpService.request(a)},a.prototype.query=function(a){var b=this;return this.request(c.get("/")).then(function(a){return b._transformQuery(a)})},a.prototype.all=function(){var a=this;return this.request(c.get("/")).then(function(b){return a._transformAll(b)})},a.prototype.find=function(a){var b=this;return this.request(c.get("/:id",{id:a})).then(function(a){return b._transformFind(a)})},a.prototype.create=function(a){var b=this;return this.request(c.post("/").data(a)).then(function(a){return b._transformCreate(a)})},a.prototype.update=function(a,b){var d=this;return this.request(c.put("/:id",{id:a}).data(b)).then(function(a){return d._transformUpdate(a)})},a.prototype.remove=function(a){var b=this;return this.request(c["delete"]("/:id",{id:a})).then(function(a){return b._transformRemove(a)})},a.prototype._transformQuery=function(a){return this._transformMultiple(a)},a.prototype._transformAll=function(a){return this._transformMultiple(a)},a.prototype._transformFind=function(a){return this._transformSingle(a)},a.prototype._transformCreate=function(a){return this._transformSingle(a)},a.prototype._transformUpdate=function(a){return this._transformSingle(a)},a.prototype._transformRemove=function(a){return a},a.prototype._transformMultiple=function(a){return this._transformer.collection(a.data[this._multipleKey])},a.prototype._transformSingle=function(a){return this._transformer.item(a.data[this._singleKey])},a}();b.Resource=d}(c=b.Api||(b.Api={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c;!function(c){var d=function(){function c(){this._aliases=new a.Data.Dictionary}return c.prototype.resource=function(a,b){var c=this;return _.each(b,function(b){return c._aliases.set(b,a)}),this},c.prototype.transform=function(a,c){var d=this,e={};return this._findResourcesRecursive(a,c,function(a,b){var c=_.clone(b),f={};d._findResources(c,function(a,b,c){var e=d._createResourceRef(b,c);a?(f[b]=f[b]||[],f[b].push(e)):f[b]=e}),_.each(f,function(a,b){c[b]=a}),e[a]=e[a]||{},e[a][c.id]=c}),e.results=_.map(e[a],function(b){return d._createResourceRef(a,b)}),new b.JsonGraph(e)},c.prototype._findResourcesRecursive=function(a,b,c){var d=this;if(_.isObject(b)){if(a&&(a=a.toString(),this._aliases.contains(a))){var e=this._aliases.get(a);_.isArray(b)?_.each(b,function(a){return c(e,a)}):c(e,b)}_.each(b,function(a,b){return d._findResourcesRecursive(b,a,c)})}},c.prototype._findResources=function(a,b){var c=this;_.isObject(a)&&_.each(a,function(a,d){if(_.isObject(a)&&d){var e=d.toString();if(c._aliases.contains(e)){var f=c._aliases.get(e);_.isArray(a)?_.each(a,function(a){return b(!0,f,a)}):b(!1,f,a)}}})},c.prototype._createResourceRef=function(a,b){return{$type:"ref",value:[a,b.id]}},c}();c.JsonGraphTransformer=d}(c=b.Transformers||(b.Transformers={}))}(c=b.Data||(b.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c=a.App.Data.Transformers.JsonGraphTransformer,d=function(){function b(){this._resources=new a.Data.Dictionary}return b.prototype.queryTransformer=function(a){return this._queryTransformer=a,this},b.prototype.getQueryTransformer=function(){return this._queryTransformer},b.prototype.resource=function(a,b){return this[a]=b,this._resources.set(a,b),this},b.prototype.execute=function(a){var b=this,c=this._resources.get(a.getFrom());return c?c.query(a).then(function(c){return b._transformQuery(a,c)}):void 0},b.prototype._transformQuery=function(a,b){var d=a.getFrom(),e=new c;this._resources.each(function(a,b){e.resource(a,[b.getSingleKey(),b.getMultipleKey()])});var f=e.transform(d,b);return f.get(["results"])},b.prototype.create=function(a,b){return null},b.prototype.update=function(a,b,c){return null},b.prototype.remove=function(a,b){return null},b.prototype.clear=function(){return null},b.prototype.importResponse=function(a){},b}();b.Service=d}(c=b.Api||(b.Api={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c;!function(a){a.LOGIN_ATTEMPT_FAIL="login-attempt-fail",a.LOGIN_ATTEMPT_SUCCESS="login-attempt-success",a.LOGIN="login",a.LOGOUT="logout",a.SESSION_SET="session-set",a.SESSION_CLEARED="session-cleared"}(c=b.ManagerEvents||(b.ManagerEvents={}));var d=function(){function b(b){this.$q=b,this.events=new a.Events.EventEmitter,this._accountTypes=new a.Data.Dictionary,this._session=null}return b.prototype.registerAccountType=function(a,b){return this._accountTypes.set(a,b),this},b.prototype.getAccountTypes=function(){return this._accountTypes},b.prototype.getSession=function(){return this._session},b.prototype.setSession=function(a){this._session=a,this.events.trigger(c.SESSION_SET,{session:this._session})},b.prototype.clearSession=function(){var a=this._session;return this._session=null,this.events.trigger(c.SESSION_CLEARED,{session:a}),this},b.prototype.loggedIn=function(){return!!this._session},b.prototype.getAccountType=function(a){return this._accountTypes.get(a)},b.prototype.login=function(b,c){var d=this,e=this._accountTypes.get(b);return e?e.login(c).then(function(b){return d.setSession(b),d.events.trigger(a.App.Auth.ManagerEvents.LOGIN_ATTEMPT_SUCCESS,{credentials:c,session:d.getSession()}),d.events.trigger(a.App.Auth.ManagerEvents.LOGIN,{credentials:c,session:d.getSession()}),d.getSession()})["catch"](function(b){throw d.events.trigger(a.App.Auth.ManagerEvents.LOGIN_ATTEMPT_FAIL,{credentials:c,session:null}),b}):this.$q.reject()},b.prototype.logout=function(a){var b=this,d=this._accountTypes.get(a);return d&&this.loggedIn()?d.logout(this.getSession()).then(function(){b.events.trigger(c.LOGOUT,{session:b.getSession()})})["finally"](function(){b.clearSession()}):this.$q.reject()},b.$inject=["$q"],b}();b.Manager=d}(c=b.Auth||(b.Auth={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(a,b,c,d,e){this._accountTypeName=a,this._identity=b,this._startTime=c,this._expirationTime=d,this._token=e}return b.prototype.setIdentity=function(a){this._identity=a},b.prototype.getIdentity=function(){return this._identity},b.prototype.setToken=function(a){this._token=a},b.prototype.getToken=function(){return this._token},b.prototype.setExpirationTime=function(a){this._expirationTime=a},b.prototype.getExpirationTime=function(){return this._expirationTime},b.prototype.setStartTime=function(a){this._startTime=a},b.prototype.getStartTime=function(){return this._startTime},b.prototype.setAccountTypeName=function(a){this._accountTypeName=a},b.prototype.getAccountTypeName=function(){return this._accountTypeName},b.prototype.toJson=function(){return{accountTypeName:this.getAccountTypeName(),identity:this.getIdentity(),startTime:this.getStartTime(),expirationTime:this.getExpirationTime(),token:this.getToken()}},b.fromJson=function(b){return new a.App.Auth.Session(b.accountTypeName,b.identity,b.startTime,b.expirationTime,b.token)},b}();b.Session=c}(c=b.Auth||(b.Auth={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){a.GET="GET",a.POST="POST",a.PUT="PUT",a.DELETE="DELETE"}(b=a.HttpMethods||(a.HttpMethods={}))}(b=a.Constants||(a.Constants={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this._data=a||{}}return a.prototype.getData=function(){return this._data},a.prototype.get=function(a){var b=this;a=a||[];var c=0,d=this._data;return _.each(a,function(a){var e=d[a];void 0!==e&&(d=b.resolvePointerValue(e)),c++}),1===c&&(d=_.values(d)),this.resolvePointerValueRecursive(d)},a.prototype.set=function(a,b){},a.prototype.merge=function(a){this.mergeData(a.getData())},a.prototype.mergeData=function(a){},a.prototype.resolvePointerValueRecursive=function(a){var b=this;return a=this.resolvePointerValue(a),_.isArray(a)?a=_.map(a,function(a){return b.resolvePointerValueRecursive(a)}):_.isObject(a)&&(a=_.mapObject(a,function(a){return b.resolvePointerValueRecursive(a)})),a},a.prototype.resolvePointerValue=function(a){return a&&a.$type&&"ref"==a.$type&&(a=this.get(a.value)),a},a}();a.JsonGraph=b}(b=a.Data||(a.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},TSCore;!function(a){var b;!function(b){var c;!function(b){var c;!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.toObject=function(b){void 0===b&&(b=!0);var c=a.prototype.toObject.call(this);return b===!1&&_.each(_.keys(this["static"].relations()),function(a){c[a]&&delete c[a]}),c},b}(a.Data.Model);b.Model=c}(c=b.Model||(b.Model={}))}(c=b.Data||(b.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c;!function(b){var c=a.Exception.Exception;!function(a){a[a.ALIVE=0]="ALIVE",a[a.CREATED=1]="CREATED",a[a.REMOVED=2]="REMOVED"}(b.ActiveModelFlag||(b.ActiveModelFlag={}));var d=b.ActiveModelFlag,e=function(b){function e(){b.apply(this,arguments),this._flags=new a.Data.Collection}return __extends(e,b),e.prototype.makeAlive=function(a,b){this._dataService=a,this._resourceName=b,this._flags.addMany([d.ALIVE,d.CREATED])},e.prototype.die=function(){this._dataService=null,this._resourceName=null,this._flags.removeMany([d.ALIVE])},e.prototype.setSavedData=function(a){this._savedData=a},e.prototype.markRemoved=function(){this._flags.add(d.REMOVED)},e.prototype.update=function(a){if(!this.isAlive())throw new c("Unable to update "+this.getResourceIdentifier()+", model is not alive");return this._dataService.updateModel(this._resourceName,this,a)},e.prototype.create=function(a,b,c){return a.createModel(b,this,c)},e.prototype.remove=function(){if(!this.isAlive())throw new c("Unable to remove "+this.getResourceIdentifier()+", model is not alive");return this._dataService.removeModel(this._resourceName,this)},e.prototype.refresh=function(){var a=this;if(!this.isAlive())throw new c("Unable to refresh "+this.getResourceIdentifier()+", model is not alive");return this._dataService.find(this._resourceName,this.getId()).then(function(b){return a.equals(b)?!1:(a.merge(b),!0)})},e.prototype.isAlive=function(){return this._flags.contains(d.ALIVE)},e.prototype.isCreated=function(){return this._flags.contains(d.CREATED)},e.prototype.isRemoved=function(){return this._flags.contains(d.REMOVED)},e.prototype.isDirty=function(){return!this._savedData||!this.equals(this._savedData)},e.prototype.getResourceIdentifier=function(){if(!this._resourceName&&!this.getId())return"unknown model";var a="";return this._resourceName&&(a+=this._resourceName),this.getId()&&(a+="("+this.getId()+")"),a},e}(a.App.Data.Model.Model);b.ActiveModel=e}(c=b.Model||(b.Model={}))}(c=b.Data||(b.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){!function(a){a[a.AND=0]="AND",a[a.OR=1]="OR"}(a.ConditionTypes||(a.ConditionTypes={}));a.ConditionTypes;!function(a){a[a.IS_EQUAL=0]="IS_EQUAL",a[a.IS_GREATER_THAN=1]="IS_GREATER_THAN",a[a.IS_GREATER_THAN_OR_EQUAL=2]="IS_GREATER_THAN_OR_EQUAL",a[a.IS_IN=3]="IS_IN",a[a.IS_LESS_THAN=4]="IS_LESS_THAN",a[a.IS_LESS_THAN_OR_EQUAL=5]="IS_LESS_THAN_OR_EQUAL",a[a.IS_LIKE=6]="IS_LIKE",a[a.IS_NOT_EQUAL=7]="IS_NOT_EQUAL"}(a.ConditionOperators||(a.ConditionOperators={}));var b=(a.ConditionOperators,function(){function a(a,b,c,d){this._type=a,this._field=b,this._operator=c,this._value=d}return a.prototype.getType=function(){return this._type},a.prototype.getField=function(){return this._field},a.prototype.getOperator=function(){return this._operator},a.prototype.getValue=function(){return this._value},a}());a.Condition=b}(b=a.Query||(a.Query={}))}(b=a.Data||(a.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){this._offset=null,this._limit=null,this._fields=[],this._conditions=[],this._sorters=[]}return a.prototype.from=function(a){return this._from=a,this},a.prototype.getFrom=function(){return this._from},a.prototype.hasFrom=function(){return!!this._from},a.prototype.field=function(a){return this._fields.push(a),this},a.prototype.addManyFields=function(a){return this._fields=this._fields.concat(a),this},a.prototype.getFields=function(){return this._fields},a.prototype.hasFields=function(){return this._fields.length>0},a.prototype.offset=function(a){return this._offset=a,this},a.prototype.getOffset=function(){return this._offset},a.prototype.hasOffset=function(){return _.isNumber(this._offset)},a.prototype.limit=function(a){return this._limit=a,this},a.prototype.getLimit=function(){return this._limit},a.prototype.hasLimit=function(){return _.isNumber(this._limit)},a.prototype.condition=function(a){return this._conditions.push(a),this},a.prototype.addManyConditions=function(a){return this._conditions=this._conditions.concat(a),this},a.prototype.getConditions=function(){return this._conditions},a.prototype.hasConditions=function(){return!!(this._conditions.length>0)},a.prototype.sorter=function(a){return this._sorters.push(a),this},a.prototype.addManySorters=function(a){return this._sorters=this._sorters.concat(a),this},a.prototype.getSorters=function(){return this._sorters},a.prototype.hasSorters=function(){return this._sorters.length>0},a.prototype.find=function(a){return this._find=a,this},a.prototype.getFind=function(){return this._find},a.prototype.hasFind=function(){return!!this._find},a.prototype.merge=function(a){return a.hasFrom()&&this.from(a.getFrom()),a.hasFields()&&this.addManyFields(a.getFields()),a.hasOffset()&&this.offset(a.getOffset()),a.hasLimit()&&this.limit(a.getLimit()),a.hasConditions()&&this.addManyConditions(a.getConditions()),a.hasSorters()&&this.addManySorters(a.getSorters()),a.hasFind()&&this.find(a.getFind()),this},a.from=function(a){return(new this).from(a)},a}();a.Query=b}(b=a.Query||(a.Query={}))}(b=a.Data||(a.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){!function(a){a[a.ASCENDING=0]="ASCENDING",a[a.DESCENDING=1]="DESCENDING"}(a.SortDirections||(a.SortDirections={}));var b=(a.SortDirections,function(){function a(a,b){this._field=a,this._direction=b}return a.prototype.getField=function(){return this._field},a.prototype.getDirection=function(){return this._direction},a}());a.Sorter=b}(b=a.Query||(a.Query={}))}(b=a.Data||(a.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c=a.Data.List,d=a.App.Data.Query.Query,e=a.App.Data.Model.ActiveModel,f=function(){function a(a){this.$q=a,this._sources=new c}return a.prototype.source=function(a){return this._sources.add(a),this},a.prototype.getSources=function(){return this._sources.clone()},a.prototype.create=function(a,b){var c=this;return this._executeCreate(a,b).then(function(a){return c._createModels(a).first()})},a.prototype.createModel=function(a,b,c){var d=this;return c&&b.assignAll(c),this._executeCreate(a,b.toObject(!0)).then(function(c){return d._updateModel(b,c),b instanceof e&&b.makeAlive(d,a),b.getId()})},a.prototype.update=function(a,b,c){var d=this;return this._executeUpdate(a,b,c).then(function(a){return d._createModels(a).first()})},a.prototype.updateModel=function(a,b,c){var d=this;return this._executeUpdate(a,b.getId(),c||b.toObject(!0)).then(function(a){return d._updateModel(b,a),null})},a.prototype.remove=function(a,b){return this._executeRemove(a,b).then(function(){return null})},a.prototype.removeModel=function(a,b){var c=this;return this._executeRemove(a,b.getId()).then(function(){return c._removeModel(b),null})},a.prototype.query=function(a){return d.from(a)},a.prototype.all=function(a){return this.execute(d.from(a))},a.prototype.find=function(a,b){return this.execute(d.from(a).find(b)).then(function(a){return a.first()})},a.prototype.execute=function(a){var b=this;return this._executeQuery(a).then(function(a){return b._createModels(a)})},a.prototype._executeQuery=function(a){return this._executeInSources(function(b){return b.execute(a)})},a.prototype._executeCreate=function(a,b){return null},a.prototype._executeUpdate=function(a,b,c){return null},a.prototype._executeRemove=function(a,b){return null},a.prototype._executeInSources=function(a){var b=this,c=0,d=this.$q.defer(),e=function(){c>=b._sources.count()&&d.reject();var f=b._sources.get(c);a(f).then(function(a){return d.resolve(a)})["catch"](function(){return e()}),c++};return e(),d.promise},a.prototype._createModels=function(a){return null},a.prototype._updateModel=function(a,b){},a.prototype._removeModel=function(a){a instanceof e&&(a.setSavedData(null),a.markRemoved(),a.die())},a.$inject=["$q"],a}();b.Service=f}(c=b.Data||(b.Data={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(){b.apply(this,arguments),this.availableIncludes=[]}return __extends(c,b),c.prototype.transform=function(a){},c.prototype.collection=function(a){var b=this;return a?_.map(a,function(a){return b.item(a)}):null},c.prototype.item=function(b){var c=this;if(!b)return null;var d=this.transform(b);return _.each(this.availableIncludes,function(b){var e="include"+a.Utils.Text.ucFirst(b);d[b]&&c[e]&&(d[b]=c[e](d))}),d},c.collection=function(a){var b=new this;return b.collection(a)},c.item=function(a){var b=new this;return b.item(a)},c}(a.BaseObject);b.Transformer=c}(c=b.Transform||(b.Transform={}))}(b=a.Data||(a.Data={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.$http=a,this.defaultHeaders={}}return a.prototype.setProtocol=function(a){this.protocol=a},a.prototype.setHostname=function(a){this.hostname=a},a.prototype.setDefaultHeader=function(a,b){this.defaultHeaders[a]=b},a.prototype.unsetDefaultHeader=function(a){delete this.defaultHeaders[a]},a.prototype.request=function(a){a=this._applyDefaults(a);var b=a.getRequestConfig();return this.$http(b)},a.prototype._applyDefaults=function(a){_.each(this.defaultHeaders,function(b,c){a.header(c,b)});var b=a.getUrl();return a.url(this.protocol+this.hostname+b),a},a}();a.Service=b}(b=a.Http||(a.Http={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c;!function(a){a.REQUEST="httpRequest",a.REQUEST_ERROR="httpRequestError",a.RESPONSE="httpResponse",a.RESPONSE_ERROR="httpResponseError",a.RESPONSE_500_ERRORS="httpResponse500Errors",a.RESPONSE_401_ERROR="httpResponseError404"}(c=b.HttpInterceptorEvents||(b.HttpInterceptorEvents={}));var d=function(){function b(b){var d=this;this.$q=b,this.events=new a.Events.EventEmitter,this.request=function(a){return d.events.trigger(c.REQUEST,{config:a}),a},this.requestError=function(a){return d.events.trigger(c.REQUEST_ERROR,{rejection:a}),d.$q.reject(a)},this.response=function(a){return d.events.trigger(c.RESPONSE,{response:a}),a},this.responseError=function(a){return d.events.trigger(c.RESPONSE_ERROR,{rejection:a}),(0===a.status||"5"===String(a.status).charAt(0))&&d.events.trigger(c.RESPONSE_500_ERRORS,{rejection:a}),401===a.status&&d.events.trigger(c.RESPONSE_401_ERROR,{rejection:a}),d.$q.reject(a)}}return b.$inject=["$q"],b}();b.HttpInterceptor=d}(c=b.Interceptors||(b.Interceptors={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));var TSCore;!function(a){var b;!function(b){var c;!function(b){var c;!function(a){a.STATE_CHANGE_START="$stateChangeStart",a.STATE_CHANGE_SUCCESS="$stateChangeSuccess",a.STATE_CHANGE_ERROR="$stateChangeError",a.STATE_NOT_FOUND="$stateNotFound"}(c||(c={}));var d;!function(a){a.PUBLIC="public",a.UNAUTHORIZED="unauthorized",a.AUTHORIZED="authorized"}(d=b.StateAccessLevels||(b.StateAccessLevels={}));var e;!function(a){a.FIRST_ROUTE="firstRoute",a.STATE_CHANGE_START="stateChangeStart",a.ENTERING_AUTHORIZED_AREA="enteringAuthorizedArea",a.ENTERING_UNAUTHORIZED_AREA="enteringUnauthorizedArea",a.ENTERING_PUBLIC_AREA="enteringPublicArea"}(e=b.StateInterceptorEvents||(b.StateInterceptorEvents={}));var f=function(){function b(b){this.$rootScope=b,this.events=new a.Events.EventEmitter,this._firstRoute=null,this._lastRoute=null}return b.prototype.init=function(){this._attachRouterEvents()},b.prototype._attachRouterEvents=function(){this.$rootScope.$on(c.STATE_CHANGE_START,_.bind(this._$stateChangeStart,this))},b.prototype._$stateChangeStart=function(a,b,c,f,g){var h={event:a,toState:b,toParams:c,fromState:f,fromParams:g};if(!f||f.accessLevel!==b.accessLevel){var i;switch(b.accessLevel){case d.AUTHORIZED:i=e.ENTERING_AUTHORIZED_AREA;break;case d.PUBLIC:i=e.ENTERING_PUBLIC_AREA;break;default:case d.UNAUTHORIZED:i=e.ENTERING_UNAUTHORIZED_AREA}this.events.trigger(i,h)}this._lastRoute={toState:b,toParams:c},this._firstRoute||(this._firstRoute=this._lastRoute,this.events.trigger(e.FIRST_ROUTE,h)),this.events.trigger(e.STATE_CHANGE_START,h)},b.prototype.getFirstRoute=function(){return this._firstRoute},b.$inject=["$rootScope"],b}();b.StateInterceptor=f}(c=b.Interceptors||(b.Interceptors={}))}(b=a.App||(a.App={}))}(TSCore||(TSCore={}));